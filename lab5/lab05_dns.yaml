---
 - name: Database server
   hosts: db_servers
   roles:
     - mysql
   become: yes

 - name: Web app
   hosts: app_servers
   roles:
     - agama
     - uwsgi
     - nginx
   become: yes

 - name: DNS server
   hosts: dns_server
   roles:
     - bind
   become: yes
   gather_facts: no
   tasks:
     - debug:
         var: hostvars['shrshryo-1']
         var: hostvars['shrshryo-2']

 - name: Collect info about all VMs
   hosts: all
   tasks:
     - setup:

#  - name: shrshryo-1
#    hosts: shrshryo-1
#    gather_facts: no
#    become: yes
#    tasks:
#      - template:
#          src: /bind/tasks/main.yaml
#          dest: /etc/resolv.conf
#          remote_src: yes

 - name: shrshryo-2
   hosts: shrshryo-2
   gather_facts: no
   become: yes
   tasks:
     - debug:
         var: hostvars['shrshryo-2']